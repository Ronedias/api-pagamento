CREATE TABLE IF NOT EXISTS CARTEIRAS (
    ID SERIAL PRIMARY KEY,
    NOME_COMPLETO VARCHAR(100),
    CPF BIGINT, EMAIL VARCHAR(100),
    "PASSWORD" VARCHAR(100),
    "TIPO_CARTEIRA" INT,
    SALDO_CARTEIRA DECIMAL(10, 2), "VERSION" BIGINT
);

CREATE UNIQUE INDEX IF NOT EXISTS cpf_idx ON CARTEIRAS (CPF);

CREATE UNIQUE INDEX IF NOT EXISTS email_idx ON CARTEIRAS (EMAIL);

CREATE TABLE IF NOT EXISTS TRANSACOES (
    ID SERIAL PRIMARY KEY,
    FONTE_PAGADORA INT,
    FONTE_BENEFICIARIA INT,
    "VALOR" DECIMAL(10, 2),
    DT_TRANSACAO TIMESTAMP,
    FOREIGN KEY (FONTE_PAGADORA) REFERENCES CARTEIRAS (ID),
    FOREIGN KEY (FONTE_BENEFICIARIA) REFERENCES CARTEIRAS (ID)
);